!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).pHash=e()}(this,function(){"use strict";var M=function(t,e){var r,n=(r="undefined"===document?(0,require("canvas").createCanvas)(200,200):document.createElement("canvas")).getContext("2d");return r.width=r.height=e,n.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,e,e),r},x=function(t,e,r){r=t.getContext("2d").getImageData(e,r,1,1).data;return[r[0],r[1],r[2],r[3]/255]},y=function(t){for(var e=[],r=t.length,n=0;n<r;n++){for(var a=0,o=0;o<r;o++)a+=t[o]*Math.cos(n*Math.PI*(o+.5)/r);a*=Math.sqrt(2/r),0==n&&(a*=1/Math.sqrt(2)),e[n]=a}return e},b=function(t){var e=t.length-1;return t.slice(1,e).reduce(function(t,e){return t+e},0)/e},q=function(t){return parseInt(t,2).toString(16)};return function(t){for(var e=M(t,32),r=[],n=[],a=[],o=[],u=0;u<32;u++){for(var f=0;f<32;f++){var i=x(e,f,u);n[f]=parseInt(Math.floor(.299*i[0]+.587*i[1]+.114*i[2]))}a[u]=y(n)}for(var c=0;c<32;c++){for(var d=0;d<32;d++)o[d]=a[d][c];r[c]=y(o)}for(var s=[],h=0;h<8;h++)for(var v=0;v<8;v++)s.push(r[h][v]);for(var l=b(s),g=[],p=0,m=s;p<m.length;p++){var I=m[p];g.push(l<I?1:0)}return q(g.join(""))}});
